{"version":3,"sources":["/Users/samuellove/Documents/GitHub/Capstone/frontend/components/User/UserSelector.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport default function UserSelector({ onUserSelect, currentUser }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [newUsername, setNewUsername] = useState(\"\");\n  const [creating, setCreating] = useState(false);\n\n  const API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001\";\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`${API_URL}/api/users`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch users\");\n      }\n      const data = await response.json();\n      setUsers(data);\n    } catch (err) {\n      setError(\"Failed to load users\");\n      console.error(\"Error fetching users:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createUser = async (e) => {\n    e.preventDefault();\n    if (!newUsername.trim()) return;\n\n    try {\n      setCreating(true);\n      setError(\"\");\n\n      const response = await fetch(`${API_URL}/api/users`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ username: newUsername.trim() }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || \"Failed to create user\");\n      }\n\n      const newUser = await response.json();\n      setUsers([newUser, ...users]);\n      setNewUsername(\"\");\n      setShowCreateForm(false);\n      onUserSelect(newUser);\n    } catch (err) {\n      setError(err.message);\n      console.error(\"Error creating user:\", err);\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const selectUser = (user) => {\n    onUserSelect(user);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"card\">\n        <div className=\"loading\">\n          <div className=\"loading-spinner\"></div>\n          Loading users...\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"card\">\n      <h2 style={{ marginBottom: \"1.5rem\", textAlign: \"center\" }}>\n        Select Your Profile\n      </h2>\n      <p\n        style={{\n          textAlign: \"center\",\n          marginBottom: \"2rem\",\n          color: \"#adb5bd\",\n          maxWidth: \"600px\",\n          margin: \"0 auto 2rem auto\",\n          lineHeight: \"1.5\",\n        }}\n      >\n        Choose an existing profile or create a new one to save your favourite\n        cards\n      </p>\n\n      {error && <div className=\"error\">{error}</div>}\n\n      {/* Current User Display */}\n      {currentUser && (\n        <div\n          style={{\n            background: \"var(--theme-cardBg)\",\n            padding: \"1rem\",\n            borderRadius: \"0.5rem\",\n            marginBottom: \"1.5rem\",\n            border: \"1px solid var(--theme-border)\",\n            boxShadow: \"0 2px 4px var(--theme-shadowColor)\",\n          }}\n        >\n          <p\n            style={{ margin: 0, fontWeight: \"500\", color: \"var(--theme-text)\" }}\n          >\n            Currently logged in as: <strong>{currentUser.username}</strong>\n          </p>\n          <button\n            onClick={() => onUserSelect(null)}\n            className=\"btn-outline mt-1\"\n            style={{ padding: \"0.5rem 1rem\", fontSize: \"0.875rem\" }}\n          >\n            Switch User\n          </button>\n        </div>\n      )}\n\n      {/* Show user selection only if no current user */}\n      {!currentUser && (\n        <>\n          {/* Existing Users */}\n          {users.length > 0 && (\n            <div style={{ marginBottom: \"1.5rem\" }}>\n              <h4 style={{ marginBottom: \"1rem\", fontSize: \"1.1rem\" }}>\n                Existing Profiles\n              </h4>\n              <div style={{ display: \"grid\", gap: \"0.5rem\" }}>\n                {users.map((user) => (\n                  <button\n                    key={user.id}\n                    onClick={() => selectUser(user)}\n                    style={{\n                      padding: \"1rem\",\n                      border: \"1px solid var(--theme-border)\",\n                      borderRadius: \"0.5rem\",\n                      background: \"var(--theme-cardBg)\",\n                      textAlign: \"left\",\n                      cursor: \"pointer\",\n                      transition: \"all 0.2s ease\",\n                      fontSize: \"1rem\",\n                      color: \"var(--theme-text)\",\n                      boxShadow: \"0 1px 3px var(--theme-shadowColor)\",\n                    }}\n                    onMouseOver={(e) => {\n                      e.target.style.borderColor = \"var(--theme-accent)\";\n                      e.target.style.background = \"var(--theme-secondary)\";\n                      e.target.style.color = \"var(--theme-text)\";\n                    }}\n                    onMouseOut={(e) => {\n                      e.target.style.borderColor = \"var(--theme-border)\";\n                      e.target.style.background = \"var(--theme-cardBg)\";\n                      e.target.style.color = \"var(--theme-text)\";\n                    }}\n                  >\n                    <div style={{ fontWeight: \"500\", marginBottom: \"0.25rem\" }}>\n                      {user.username}\n                    </div>\n                    <div\n                      style={{\n                        fontSize: \"0.875rem\",\n                        color: \"var(--theme-textLight)\",\n                      }}\n                    >\n                      Created {new Date(user.created_at).toLocaleDateString()}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Create New User Section */}\n          <div\n            style={{\n              borderTop:\n                users.length > 0 ? \"1px solid var(--theme-border)\" : \"none\",\n              paddingTop: users.length > 0 ? \"1.5rem\" : \"0\",\n            }}\n          >\n            {!showCreateForm ? (\n              <div style={{ textAlign: \"center\" }}>\n                <h4 style={{ marginBottom: \"0.5rem\", fontSize: \"1.1rem\" }}>\n                  Create New Profile\n                </h4>\n                <p\n                  style={{\n                    color: \"var(--theme-textLight)\",\n                    marginBottom: \"1rem\",\n                  }}\n                >\n                  Start fresh with a new profile to track your favourite cards\n                </p>\n                <button\n                  onClick={() => setShowCreateForm(true)}\n                  className=\"btn-outline\"\n                  style={{ width: \"100%\" }}\n                >\n                  + Create New Profile\n                </button>\n              </div>\n            ) : (\n              <div>\n                <h4 style={{ marginBottom: \"1rem\", fontSize: \"1.1rem\" }}>\n                  Create New Profile\n                </h4>\n                <form onSubmit={createUser}>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"username\" className=\"form-label\">\n                      Username\n                    </label>\n                    <input\n                      id=\"username\"\n                      type=\"text\"\n                      value={newUsername}\n                      onChange={(e) => setNewUsername(e.target.value)}\n                      placeholder=\"Enter a username\"\n                      disabled={creating}\n                      style={{ marginBottom: \"1rem\" }}\n                    />\n                  </div>\n\n                  <div className=\"d-flex gap-2\">\n                    <button\n                      type=\"submit\"\n                      disabled={creating || !newUsername.trim()}\n                      style={{ flex: 1 }}\n                    >\n                      {creating ? \"Creating...\" : \"Create Profile\"}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCreateForm(false);\n                        setNewUsername(\"\");\n                        setError(\"\");\n                      }}\n                      className=\"btn-secondary\"\n                      disabled={creating}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":["UserSelector","onUserSelect","currentUser","users","setUsers","useState","loading","setLoading","error","setError","showCreateForm","setShowCreateForm","newUsername","setNewUsername","creating","setCreating","API_URL","process","env","NEXT_PUBLIC_API_URL","useEffect","fetchUsers","response","fetch","ok","Error","data","json","err","console","createUser","e","preventDefault","trim","method","headers","body","JSON","stringify","username","errorData","newUser","message","selectUser","user","div","className","h2","style","marginBottom","textAlign","p","color","maxWidth","margin","lineHeight","background","padding","borderRadius","border","boxShadow","fontWeight","strong","button","onClick","fontSize","length","h4","display","gap","map","cursor","transition","onMouseOver","target","borderColor","onMouseOut","Date","created_at","toLocaleDateString","id","borderTop","paddingTop","width","form","onSubmit","label","htmlFor","input","type","value","onChange","placeholder","disabled","flex"],"mappings":"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"}